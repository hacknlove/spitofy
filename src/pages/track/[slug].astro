---
import { type CollectionEntry, getCollection } from "astro:content";
import Header from "@/components/Menu/Header.astro";
import Footer from "@/components/Menu/Footer.astro";
import Layout from "@/layouts/Layout.astro";
import Cover from "@/components/Cover/Cover.astro";
import Controls from "@/components/Controls/Controls.astro";

export async function getStaticPaths() {
  const tracks = await getCollection("tracks");
  return tracks.map((track) => ({
    params: { slug: track.data.slug },
    props: track,
  }));
}
type Props = CollectionEntry<"tracks">;

const track = Astro.props;
const { name } = track.data;
---

<Layout title="Spitofy. Make the music Punk Again" track={track}>
  <Header title={name} />
  <Cover track={track} />
  <Controls track={track} />
  <Footer />
</Layout>

<style>
  .mainPicture {
    width: 75vmin;
    height: 75vmin;
    margin: 0 auto;
    display: block;
  }
</style>
